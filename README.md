# vid

`vid` — небольшой CLI-инструмент для macOS, предназначенный для приведения screen recordings `.mov` файлов к **share-ready MP4**.

Инструмент решает один практический сценарий:

> быстро записать экран → сконвертировать в удобоваримый mp4 → отправить видео в мессенджер, почту или документацию  

> без ручной перекодировки, подбора пресетов и сюрпризов с размером файла

Проект сделан как **vibe-code проект на коленке**, но с осознанной архитектурой и детерминированным поведением.

---

## Назначение

`vid` автоматизирует повторяющуюся рутину после записи экрана на macOS:

- `.mov` файлы с VFR, Retina-разрешением и нестабильным битрейтом
- разные результаты при загрузке в Telegram / Slack / веб
- постоянная ручная возня с `ffmpeg` или онлайн-сервисами

Цель инструмента — **один предсказуемый выход**:
- MP4
- читаемый интерфейс
- разумный размер
- максимальная совместимость

---

## Технические зависимости

Инструмент использует только стандартные системные утилиты.

### Требуется

- `bash`
- `ffmpeg` (включая `ffprobe`)
- `python3`

### Установка зависимостей (macOS)

Через Homebrew:

```bash
brew install ffmpeg python
```

Проверка:

```bash
ffmpeg -version
ffprobe -version
python3 --version
```

---

## Установка

Рекомендуемый вариант — хранить пользовательские CLI-скрипты в домашней директории,
например в `~/bin`, и добавить её в `PATH`.

### Шаги установки

1. Создайте директорию для пользовательских бинарников (если её ещё нет):

```bash
mkdir -p ~/bin
```

2. Поместите файл `vid` в эту директорию, например:

```bash
mv vid ~/bin/vid
```

3. Сделайте файл исполняемым:

```bash
chmod +x ~/bin/vid
```

4. Добавьте `~/bin` в `PATH` (если ещё не добавлен).

Для `zsh` (по умолчанию в macOS):

```bash
echo 'export PATH="$HOME/bin:$PATH"' >> ~/.zshrc
```

Для `bash`:

```bash
echo 'export PATH="$HOME/bin:$PATH"' >> ~/.bashrc
```

Примените изменения:

```bash
source ~/.zshrc
```

5. Проверка установки:

```bash
vid --help
```

---

## Быстрый smoke-test

```bash
vid share demo.mov
```

Ожидаемый результат:
- создан файл `demo_share.mp4`
- файл воспроизводится в любом плеере
- корректно загружается в мессенджеры

---

## Поддерживаемые команды

### `vid share`

Основная и единственная команда.

```bash
vid share <input> [output] [options]
```

### Аргументы

- `<input>` — входной видеофайл (`.mov`, `.mp4`, и т.п.)
- `[output]` — опционально:
  - путь к файлу
  - путь к директории
  - имя файла без расширения

### Опции

```text
-q, --quality   low | default | high
-v, --verbose   показать полный лог ffmpeg
```

---

## Quality-профили

| Профиль  | Назначение |
|---------|------------|
| default | Сбалансированный режим (по умолчанию) |
| low     | Минимальный размер файла |
| high    | Повышенная читаемость интерфейса |

Примеры:

```bash
vid share demo.mov --quality low
vid share demo.mov -q high
```

---

## Поведение output

### Автоматическое имя (если output не задан)

Имя строится из имени входного файла:

```text
demo_share.mp4
demo_share_low.mp4
demo_share_high.mp4
```

---

### Авто-версионирование

Файлы **никогда не перезаписываются**.

```text
demo_share.mp4
demo_share_v2.mp4
demo_share_v3.mp4
```

То же самое для `low / high`.

---

### Явный output — файл

```bash
vid share demo.mov out.mp4
```

Если файл существует:

```text
out_v2.mp4
out_v3.mp4
```

---

### Явный output — файл без расширения

`.mp4` добавляется автоматически:

```bash
vid share demo.mov out
```

Результат:

```text
out.mp4
```

---

### Явный output — директория

```bash
vid share demo.mov exports/
```

Результат:

```text
exports/demo_share.mp4
```

Директория будет создана автоматически, если её нет.

---

## Verbose-режим

Для диагностики и отладки можно включить полный лог `ffmpeg`:

```bash
vid share demo.mov --verbose
```

---

## Batch-использование

Batch-режим намеренно не встроен в сам инструмент.  
Используется классический UNIX-подход:

```bash
mkdir -p out
for f in *.mov; do
  vid share "$f" out/ -q low
done
```

Инструмент детерминирован и безопасен для массовой обработки.

---

## Ограничения

- Не предназначен для монтажного продакшна
- Не решает задачи цветокоррекции и сведения звука
- Фокус — быстрые демо, объяснения, фиксация контекста

---

## Лицензия

MIT.  
Делайте с этим что угодно — это вайбкод.
